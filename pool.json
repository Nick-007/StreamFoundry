{
  "id": "gpu-ffmpeg-cmaf",
  "vmSize": "Standard_NC4as_T4_v3",
  "targetDedicatedNodes": 1,
  "targetLowPriorityNodes": 4,
  "taskSlotsPerNode": 2,
  "targetNodeCommunicationMode": "simplified",
  "virtualMachineConfiguration": {
    "imageReference": {
      "publisher": "Canonical",
      "offer": "0001-com-ubuntu-server-jammy",
      "sku": "22_04-lts",
      "version": "latest"
    },
    "nodeAgentSKUId": "batch.node.ubuntu 22.04",
    "containerConfiguration": {
      "type": "dockerCompatible",
      "containerImageNames": [
        "<acrName>.azurecr.io/streamfoundry:gpu"
      ],
      "containerRegistries": [
        {
          "registryServer": "<acrName>.azurecr.io",
          "userName": "<acr-username>",
          "password": "<acr-password>"
        }
      ]
    },
    "extensions": [
      {
        "name": "nvidiaGpu",
        "publisher": "Microsoft.HpcCompute",
        "type": "NvidiaGpuDriverLinux",
        "typeHandlerVersion": "1.6",
        "autoUpgradeMinorVersion": true,
        "enableAutomaticUpgrade": true,
        "settings": {}
      }
    ]
  },
  "enableAutoScale": false,
  "taskSchedulingPolicy": {
    "nodeFillType": "spread"
  }
}